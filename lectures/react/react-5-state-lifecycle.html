<!doctype html>
<html>
	<head>
    <title>React - State and lifecycles</title>
    <link href="header.html" rel="import" />
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
        <section>
          <h2 style="color: #61DAFB;">React</h4>
          <h4>State and Lifecycle Hooks</h4>
        </section>

        <section>
          <h3>References*</h3>
          <ul>
            <li>Completely opt-in. You can try Hooks in a few components without rewriting any existing code. But you don't have to learn or use Hooks right now if you don't want to.</li>
            <li>100% backwards-compatible. Hooks don't contain any breaking changes.</li>
            <li>Available with the release of v16.8.0. (1 month ago)</li>
          </ul>
        </section>

        <section>
          <h3>According to React</h3>
          <ul>
            <li>There are no plans to remove classes from React.</li>
            <li>Hooks don't replace your knowledge of React concepts. Instead, Hooks provide a more direct API to the React concepts you already know: props, state, context, refs, and lifecycle. As we will show later, Hooks also offer a new powerful way to combine them.</li>
          </ul>
        </section>

        <section>
          <h3>In this course</h3>
          <ul>
            <li>In this course we will work mainly with Classes, this.state, this.setState instead of the new Hooks. However we will also look into hooks.</li>
            <li>For bigger companies and project adapting to new changes take time. (if they do them at all).</li>
            <li>If you come into an already started project chances that they ported all components are small. So major parts of the application will be the “old" way.</li>
            <li>React recommends using it for new code.</li>
            <li>First assignment → Classes, second and third it's up to you.</li>
          </ul>
        </section>

        <section>
          <h3>What is state?</h3>
          <ul>
            <li>The data that defines the condition of some object or system.</li>
            <li>The television is off. The coffee is hot. These are states.</li>
            <li>Difference between a value and a variable - the number 42 does not have a state since you can't change it.</li>
            <li>A clock is a good example</li>
          </ul>
        </section>

        <section>
          <h3>Component state</h3>
          <ul>
            <li>Every component can have its own local state.</li>
            <li>Only class components have the state functionality.</li>
            <li>State is something you set up by yourself, not like props.</li>
            <li>Every time the state is updated, the render method will run.</li>
          </ul>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### Set the initial state in the constructor
            ```JavaScript
            constructor(props) {
              super(props); // Always pass props to base constructor
              this.state = {name: 'John Doe};
            }
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### Set the initial state in the constructor
            ```JavaScript
            constructor(props) {
              super(props); // Always pass props to base constructor
              this.state = {
                name: 'John Doe',
                date: new Date()
              };
            }
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### State is an Object
            ```JavaScript
            constructor(props) {
              super(props);
              this.state = {date: new Date()};
            }

            <h2>It is {this.state.date.toLocaleTimeString()}.</h2> //JSX
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### Updating state
            #### Wrong and does NOT trigger re-render and update

            ```JavaScript
            this.state.comment = 'Hello';
            ```
            #### Correct - will trigger re-render and update

            ```JavaScript
            this.setState({comment: 'Hello'});
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### When you call setState(), React merges the object you provide into the current state.

            ```JavaScript
            this.state = {
              posts: [],
              comments: []
            };

            this.setState({posts: ['hello', 'john']});
            this.setState({comments: ['drinking java', 'cool']});
            ```

            These are called independently
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### Second argument is a callback that runs after state is updated


            ```JavaScript
            this.state = {
              posts: [],
            };

            this.setState(
              {posts: ['hello', 'john']},
              () => {console.log('state is updated')
            );
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ### Setting a nested state

            ```JavaScript
            this.setState({
                key: {
                key: value
              }
            });
            ```
          </script>
        </section>

        <section>
          <h3>Top-down / Unidirectional data flow</h3>
          <ul>
            <li>Components have now idea if some other state is passed down to them. They will always get it as props.</li>
            <li>The parent component does now know if the child is a class or a function.</li>
            <li>The state is local or encapsulated. It is not accessible to any component other than the one that owns and sets it.</li>
            <li>State can only affect components “below" them in the tree.</li>
          </ul>
        </section>

        <section>
          <h3>Lifecycle Hooks (methods)</h3>
          <ul>
            <li><b>componentDidMount</b> - is invoked when the components output rendered to the DOM for the first time (mounting)</li>
            <li><b>componentDidUpdate</b> - is invoked immediately after updating occurs. This method is not called for the initial render.</li>
            <li><b>componentWillUnmount</b> - is invoked when the DOM produced by the Component is removed (unmounting)</li>
          </ul>
        </section>

        <section>
          <h3><a href="https://reactjs.org/docs/react-component.html#mounting">Lifecycle Methods</a></h3>
        </section>

        <section>
          <img src="media/react-5/lifecycles.png" alt="lifecycle methods">
        </section>

        <section>
          <h3>References</h3>
          <ul>
            <li><a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">Lifecycle diagram</a></li>
            <li><a href="https://reactjs.org/docs/react-component.html#mounting">All lifecycle methods</a></li>
            <li><a href="https://reactjs.org/docs/state-and-lifecycle.html">Lifecycle diagram</a></li>
            <li><a href="https://reactjs.org/docs/hooks-intro.html">Hooks</a></li>
            <li><a href="https://reactjs.org/docs/react-component.html#setstate">SetState</a></li>
          </ul>
        </section>
			</div>
		</div>

		<script src="../../reveal/js/reveal.js"></script>
		<script src="../../initialize.js"></script>
	</body>
</html>
